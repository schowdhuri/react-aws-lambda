(this["webpackJsonpreact-aws-lambda"]=this["webpackJsonpreact-aws-lambda"]||[]).push([[0],{42:function(e,n){},493:function(e,n,t){"use strict";t.r(n);var r=t(1),a=t.n(r),c=t(34),o=t.n(c),i=t(17),u=t(80),d=t(72),s=t(14),l=t(18),f=("undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,l.d);var O=t(20),p=Object(O.a)({basename:"/react-aws-lambda"}),b=t(29),m=[],x=function(){var e,n,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,a=arguments.length>1?arguments[1]:void 0,c=a.type;switch(c){case"IS_LOADING":if(e=a.id,n=a.status,t=r.findIndex((function(n){return n===e})),n)return[].concat(Object(s.a)(r),[e]);if(-1!==t)return[].concat(Object(s.a)(r.slice(0,t)),Object(s.a)(r.slice(t+1)));break;default:return r}},v=[],g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,n=arguments.length>1?arguments[1]:void 0,t=n.type;switch(t){case"GET_TODOS_OK":return n.value;case"SAVE_TODO":return[n.data].concat(Object(s.a)(e));case"SAVE_TODO_OK":var r=e.findIndex((function(e){return e.id===n.fakeId}));if(-1!==r)return[].concat(Object(s.a)(e.slice(0,r)),[n.value],Object(s.a)(e.slice(r+1)));break;case"SAVE_TODO_ERR":return e.filter((function(e){return e.id!==n.fakeId}));case"UPDATE_TODO":var a=n.value,c=e.findIndex((function(e){return e.id===a.id}));if(-1!==c)return[].concat(Object(s.a)(e.slice(0,c)),[n.value],Object(s.a)(e.slice(c+1)));break;case"DEL_TODO_OK":return e.filter((function(e){return e.id!==n.value.id}))}return e},j=t(16),E={loadingTodos:!1,deleting:[]};var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"GET_TODOS":return Object(j.a)({},e,{loadingTodos:!0});case"GET_TODOS_ERR":case"GET_TODOS_OK":return Object(j.a)({},e,{loadingTodos:!1});case"DEL_TODO":return Object(j.a)({},e,{deleting:[n.id].concat(Object(s.a)(e.deleting))});case"DEL_TODO_OK":return Object(j.a)({},e,{deleting:e.deleting.filter((function(e){return n.value.id}))});case"DEL_TODO_ERR":return Object(j.a)({},e,{deleting:e.deleting.filter((function(e){return!n.id}))})}return e};var T=function(e){return Object(l.c)({router:Object(b.b)(e),loading:x,todos:g,uiState:h})},y=t(9),_=t.n(y),D=t(6),w=t(75),k=t.n(w),S=function(e,n){return{type:"IS_LOADING",id:e,status:n}},N=function(e,n){return{type:"SAVE_TODO_OK",value:e,fakeId:n}},R=function(e,n){return{type:"SAVE_TODO_ERR",error:e,fakeId:n}},I=function(e){return{type:"UPDATE_TODO_OK",value:e}},P=function(e,n){return{type:"DEL_TODO_ERR",error:e,id:n}},L=t(30),A=t.n(L);A.a.config.region="us-east-1",A.a.config.credentials=new A.a.CognitoIdentityCredentials({IdentityPoolId:"us-east-1:f81f99c1-ed34-43b9-aba0-4e7555152c05"});var G=new A.a.Lambda,V=_.a.mark(C),J=_.a.mark(U);function K(e){return new Promise((function(n,t){G.invoke({FunctionName:"delete_todo",InvocationType:"RequestResponse",LogType:"None",Payload:e},(function(e,r){if(e)console.log({err:e}),t(e);else try{var a=JSON.parse(r.Payload);n(a)}catch(c){t(c)}}))}))}function C(e){var n,t;return _.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.id,r.next=3,Object(D.c)(S("DEL_TODO",!0));case 3:return r.prev=3,r.next=6,Object(D.b)(K,JSON.stringify({id:n}));case 6:return t=r.sent,console.log(t),r.next=10,Object(D.c)({type:"DEL_TODO_OK",value:t});case 10:r.next=17;break;case 12:return r.prev=12,r.t0=r.catch(3),console.log(r.t0),r.next=17,Object(D.c)(P(r.t0.text,n));case 17:return r.next=19,Object(D.c)(S("DEL_TODO",!1));case 19:case"end":return r.stop()}}),V,null,[[3,12]])}function U(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.d)("DEL_TODO",C);case 2:case"end":return e.stop()}}),J)}var q=_.a.mark(X),z=_.a.mark(B);function F(){return new Promise((function(e,n){G.invoke({FunctionName:"get_todos",InvocationType:"RequestResponse",LogType:"None"},(function(t,r){if(t)console.log({err:t}),n(t);else try{var a=JSON.parse(r.Payload);e(a.Items)}catch(c){n(c)}}))}))}function X(e){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.c)(S("GET_TODOS",!0));case 2:return e.prev=2,e.next=5,Object(D.b)(F);case 5:return n=e.sent,e.next=8,Object(D.c)({type:"GET_TODOS_OK",value:n});case 8:e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(2),console.log(e.t0),e.next=15,Object(D.c)({type:"GET_TODOS_ERR",error:e.t0.text});case 15:return e.next=17,Object(D.c)(S("GET_TODOS",!1));case 17:case"end":return e.stop()}}),q,null,[[2,10]])}function B(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.d)("GET_TODOS",X);case 2:case"end":return e.stop()}}),z)}var M=_.a.mark(Q),W=_.a.mark(Y);function H(e){return new Promise((function(n,t){G.invoke({FunctionName:"create_todo",InvocationType:"RequestResponse",LogType:"None",Payload:e},(function(e,r){if(e)console.log({err:e}),t(e);else try{var a=JSON.parse(r.Payload);n(a)}catch(c){t(c)}}))}))}function Q(e){var n,t,r;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=Object(j.a)({},e.data),t=n.id,delete n.id,a.next=5,Object(D.c)(S("SAVE_TODO",!0));case 5:return a.prev=5,a.next=8,Object(D.b)(H,JSON.stringify(n));case 8:return r=a.sent,a.next=11,Object(D.c)(N(r,t));case 11:a.next=18;break;case 13:return a.prev=13,a.t0=a.catch(5),console.log(a.t0),a.next=18,Object(D.c)(R(a.t0.text,t));case 18:return a.next=20,Object(D.c)(S("SAVE_TODO",!1));case 20:case"end":return a.stop()}}),M,null,[[5,13]])}function Y(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.d)("SAVE_TODO",Q);case 2:case"end":return e.stop()}}),W)}var Z=_.a.mark(ne),$=_.a.mark(te);function ee(e){return new Promise((function(n,t){G.invoke({FunctionName:"create_todo",InvocationType:"RequestResponse",LogType:"None",Payload:e},(function(e,r){if(e)console.log({err:e}),t(e);else try{var a=JSON.parse(r.Payload);n(a)}catch(c){t(c)}}))}))}function ne(e){var n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.value,t.next=3,Object(D.c)(S("UPDATE_TODO",!0));case 3:return t.prev=3,t.next=6,Object(D.b)(ee,JSON.stringify(n));case 6:return t.next=8,Object(D.c)(I(n));case 8:t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(3),console.log(t.t0),t.next=15,Object(D.c)({type:"UPDATE_TODO_ERR",error:t.t0.text});case 15:return t.next=17,Object(D.c)(S("UPDATE_TODO",!1));case 17:case"end":return t.stop()}}),Z,null,[[3,10]])}function te(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.d)("UPDATE_TODO",ne);case 2:case"end":return e.stop()}}),$)}var re=_.a.mark(ae);function ae(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.a)([U(),B(),Y(),te()]);case 2:case"end":return e.stop()}}),re)}var ce=t(11),oe=t(36),ie=t(12),ue=t(79);t(71);function de(){var e=Object(ce.a)(["\n  align-items: center;\n  background: #e2e2e2;\n  border: none;\n  border-radius: 50%;\n  box-shadow:  6px 6px 12px #d7d7d7,\n               -6px -6px 12px #ededed;\n  color: #17ab26;\n  display: flex;\n  font-size: 1.25rem;\n  justify-content: center;\n  height: 3rem;\n  margin-left: 1rem;\n  width: 3rem;\n  transition: background-color 0.2s, color 0.2s;\n\n  @media all and (min-width: 780px) {\n    height: 4rem;\n    width: 4rem;\n  }\n  &:active,\n  &:target {\n    background: #17ab26;\n    color: #e3e3e3;\n  }\n"]);return de=function(){return e},e}function se(){var e=Object(ce.a)(["\n  background: #e2e2e2;\n  border: none;\n  border-radius: 4px;\n  box-shadow: inset 8px 8px 16px #d7d7d7, inset -8px -8px 16px #ededed;\n  flex: 1;\n  font-size: 1.25rem;\n  padding: 1rem;\n  @media all and (min-width: 768px) {\n    font-size: 1.5rem;\n    padding: 2rem;\n  }\n"]);return se=function(){return e},e}function le(){var e=Object(ce.a)(["\n  align-items: center;\n  display: flex;\n  margin-bottom: 2.5rem;\n"]);return le=function(){return e},e}var fe=ie.b.form(le()),Oe=ie.b.input(se()),pe=ie.b.button(de()),be=function(){var e=Object(r.useState)(""),n=Object(ue.a)(e,2),t=n[0],c=n[1],o=Object(i.d)(),u=function(){var e;t&&(o((e={name:t,completed:!1},{type:"SAVE_TODO",data:Object(j.a)({},e,{id:k.a.generate()})})),c(""))};return a.a.createElement(fe,{onSubmit:function(e){return e.preventDefault(),u(),!1}},a.a.createElement(Oe,{type:"text",onChange:function(e){var n=e.target;c(n.value)},value:t,placeholder:"What's next?"}),a.a.createElement(pe,{onClick:u},a.a.createElement("i",{className:"fa fa-plus"})))},me=function(e){return e.todos},xe=function(e){return e.uiState};function ve(){var e=Object(ce.a)(["\n  animation: "," 2s linear infinite;\n"]);return ve=function(){return e},e}function ge(){var e=Object(ce.a)(["\n  from {\n    transform:rotate(0deg);\n  }\n  to {\n    transform:rotate(360deg);\n  }\n"]);return ge=function(){return e},e}var je=Object(ie.c)(ge());function Ee(){var e=Object(ce.a)(["\n  align-items: center;\n  background: #e2e2e2;\n  border: none;\n  border-radius: 50%;\n  box-shadow: 6px 6px 12px #d7d7d7, -6px -6px 12px #ededed;\n  color: #982929;\n  display: flex;\n  font-size: 1.25rem;\n  justify-content: center;\n  height: 3rem;\n  width: 3rem;\n  transition: background-color 0.2s, color 0.2s;\n\n  &:active,\n  &:target {\n    background: #982929;\n    color: #e3e3e3;\n  }\n"]);return Ee=function(){return e},e}function he(){var e=Object(ce.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n"]);return he=function(){return e},e}function Te(){var e=Object(ce.a)(["\n  flex: 5;\n\n  ","\n"]);return Te=function(){return e},e}function ye(){var e=Object(ce.a)(["\n  align-items: center;\n  background: #e2e2e2;\n  border-radius: 4px;\n  box-shadow: inset 6px 6px 12px #d7d7d7, inset -6px -6px 12px #ededed;\n  display: flex;\n  height: 2rem;\n  justify-content: center;\n  margin-right: 1rem;\n  width: 2rem;\n\n  ",'\n\n  input[type="checkbox"] {\n    display: none;\n  }\n']);return ye=function(){return e},e}function _e(){var e=Object(ce.a)(["\n  align-items: center;\n  display: flex;\n  padding: 1rem 0;\n  @media all and (min-width: 780px) {\n    padding: 1rem 0.5rem 1rem 0;\n  }\n  & + & {\n    border-top: solid 1px #eaeaea;\n  }\n"]);return _e=function(){return e},e}function De(){var e=Object(ce.a)(["\n  list-style-type: none;\n  padding: 0;\n  margin: 0;\n"]);return De=function(){return e},e}function we(){var e=Object(ce.a)(["\n  display: flex;\n  padding: 1rem;\n  .fa {\n    margin-right: 5px;\n    ",";\n  }\n"]);return we=function(){return e},e}var ke=ie.b.div(we(),(function(){return Object(ie.a)(ve(),je)})),Se=ie.b.ul(De()),Ne=ie.b.li(_e()),Re=ie.b.label(ye(),(function(e){return e.completed?"\n      background-color: #17ab26;\n      box-shadow: inset 6px 6px 12px #16a224,\n            inset -6px -6px 12px #18b428;\n      color: #fff;\n    ":""})),Ie=ie.b.div(Te(),(function(e){return e.completed?"\n      font-style: italic;\n      opacity: 0.7;\n      text-decoration: line-through;\n    ":""})),Pe=ie.b.div(he()),Le=ie.b.button(Ee()),Ae=function(){var e=Object(i.d)(),n=Object(i.e)(me),t=Object(i.e)(xe);Object(r.useEffect)((function(){e({type:"GET_TODOS"})}),[e]);var c=function(n){return function(){e({type:"UPDATE_TODO",value:Object(j.a)({},n,{completed:!n.completed})})}},o=function(n){return function(){e({type:"DEL_TODO",id:n.id})}};return t.loadingTodos?a.a.createElement(ke,null,a.a.createElement("i",{className:"fa fa-spinner"}),"Loading ..."):a.a.createElement(Se,null,n.filter((function(e){return!t.deleting.find((function(n){return n===e.id}))})).map((function(e){return a.a.createElement(Ne,{key:e.id},a.a.createElement(Re,{completed:e.completed,onClick:c(e)},!e.completed||a.a.createElement("i",{className:"fa fa-check"})),a.a.createElement(Ie,{completed:e.completed,onClick:c(e)},e.name),a.a.createElement(Pe,null,a.a.createElement(Le,{onClick:o(e)},a.a.createElement("i",{className:"fa fa-times"}))))})))};function Ge(){var e=Object(ce.a)(["\n  padding: 2rem 1rem;\n  width: 100vw;\n  @media all and (min-width: 780px) {\n    background: #e2e2e2;\n    border-radius: 16px;\n    box-shadow: 20px 20px 60px #c0c0c0, -20px -20px 60px #ffffff;\n    max-width: 60rem;\n    padding: 2rem;\n    width: 80vw;\n  }\n"]);return Ge=function(){return e},e}function Ve(){var e=Object(ce.a)(["\n  align-items: center;\n  display: flex;\n  justify-content: center;\n  min-height: 100vh;\n  @media all and (min-width: 780px) {\n    padding: 2rem;\n  }\n"]);return Ve=function(){return e},e}var Je,Ke,Ce=function(e){return a.a.createElement(Ue,null,a.a.createElement(qe,null,e.children))},Ue=ie.b.div(Ve()),qe=ie.b.div(Ge()),ze=Object(u.a)(),Fe=T(p),Xe=(Je=Fe,Ke=[ze,Object(d.a)(p)],Object(l.e)(Je,{},f(l.a.apply(void 0,Object(s.a)(Ke)))));ze.run(ae);var Be;Be=function(){return a.a.createElement(b.a,{history:p},a.a.createElement(oe.c,null,a.a.createElement(oe.a,{path:"/",exact:!0},a.a.createElement(Ce,null,a.a.createElement(be,null),a.a.createElement(Ae,null)))))},o.a.render(a.a.createElement(i.a,{store:Xe},a.a.createElement(Be,null)),document.getElementById("root"))},71:function(e,n,t){},82:function(e,n,t){e.exports=t(493)}},[[82,1,2]]]);
//# sourceMappingURL=main.ea9116f5.chunk.js.map